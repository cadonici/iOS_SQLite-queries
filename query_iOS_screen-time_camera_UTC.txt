SELECT
    strftime('%Y-%m-%d %H:%M:%S', ZUSAGEBLOCK.ZSTARTDATE + 978307200, 'unixepoch', 'localtime') AS "Start date (UTC+2)",
    ZUSAGETIMEDITEM.ZBUNDLEIDENTIFIER AS "App",
    ZUSAGETIMEDITEM.ZTOTALTIMEINSECONDS AS "Screen time in seconds (single app)",
	ZUSAGECOUNTEDITEM.ZNUMBEROFNOTIFICATIONS AS "Number of notifications",
    ZUSAGECOUNTEDITEM.ZNUMBEROFPICKUPS AS "Number of Pickups",
    ZUSAGEBLOCK.ZDURATIONINMINUTES AS "Block duration in minutes",
    ZUSAGEBLOCK.ZNUMBEROFPICKUPSWITHOUTAPPLICATIONUSAGE AS "Number of pickups without application",
    strftime('%M:%S', ZUSAGEBLOCK.ZSCREENTIMEINSECONDS, 'unixepoch') AS "Total block screen time (mm:ss)",
    strftime('%Y-%m-%d %H:%M:%S', ZUSAGEBLOCK.ZFIRSTPICKUPDATE + 978307200, 'unixepoch', 'localtime') AS "First pickup date (UTC+2)",
    strftime('%Y-%m-%d %H:%M:%S', ZUSAGEBLOCK.ZLASTEVENTDATE + 978307200, 'unixepoch', 'localtime') AS "Last event date (UTC+2)",
    strftime('%Y-%m-%d %H:%M:%S', ZUSAGEBLOCK.ZLONGESTSESSIONENDDATE + 978307200, 'unixepoch', 'localtime') AS "Longest session date (UTC+2)",
    strftime('%Y-%m-%d %H:%M:%S', ZUSAGEBLOCK.ZLONGESTSESSIONSTARTDATE + 978307200, 'unixepoch', 'localtime') AS "Longest session start date (UTC+2)",
	strftime('%Y-%m-%d %H:%M:%S', ZUSAGEBLOCK.ZLONGESTSESSIONENDDATE + 978307200, 'unixepoch', 'localtime') AS "Longest session end date (UTC+2)"


FROM
    ZUSAGETIMEDITEM

JOIN
    ZUSAGECATEGORY ON ZUSAGETIMEDITEM.ZCATEGORY = ZUSAGECATEGORY.Z_PK
JOIN
    ZUSAGEBLOCK ON ZUSAGECATEGORY.ZBLOCK = ZUSAGEBLOCK.Z_PK
	
LEFT JOIN
    ZUSAGECOUNTEDITEM ON ZUSAGETIMEDITEM.ZBUNDLEIDENTIFIER = ZUSAGECOUNTEDITEM.ZBUNDLEIDENTIFIER AND ZUSAGECATEGORY.ZBLOCK = ZUSAGECOUNTEDITEM.ZBLOCK

WHERE ZUSAGETIMEDITEM.ZBUNDLEIDENTIFIER = "com.apple.camera"
	
ORDER BY
    ZUSAGECATEGORY.ZBLOCK ASC;